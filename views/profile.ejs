<%- include('partials/header') -%>
<section class="container p-4 mx-auto">
	<section class="space-y-3">
		<div class="flex justify-between text-gray-600">
			<p>Welcome, <%= `${user.name}`%></p>
			<p><%= `${user.email}`%></p>
		</div>
		<div class="space-y-3">
			<h2 class="text-xl">File a Missing Persons Report</h2>
			<output class="notification" aria-live="polite"></output>
			<form
				class="space-y-3 submissionform"
				id="add-person-form"
				action="/persons/createPerson"
				method="POST"
				enctype="multipart/form-data"
			>
				<div>
					<label for="name" class="block text-sm font-medium text-gray-700"
						>Name</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="name"
							id="name"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="Jane Doe"
						/>
					</div>
				</div>
				<div>
					<label for="status" class="block text-sm font-medium text-gray-700"
						>Status</label
					>
					<select
						id="status"
						name="status"
						class="block w-full py-2 pl-3 pr-10 mt-1 text-base border-gray-300 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
					>
						<option value="missing">Missing</option>
						<option value="found">Found</option>
						<option value="deceased">Deceased</option>
						<option value="kidnapped">Kidnapped</option>
					</select>
				</div>
				<div>
					<label for="hairColor" class="block text-sm font-medium text-gray-700"
						>Hair color</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="hairColor"
							id="hairColor"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="Blonde"
						/>
					</div>
				</div>
				<div>
					<label
						for="lastSeenDate"
						class="block text-sm font-medium text-gray-700"
						>Last seen</label
					>
					<div class="mt-1">
						<input
							type="date"
							name="lastSeenDate"
							id="lastSeenDate"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="Blonde"
						/>
					</div>
				</div>
				<div>
					<label for="sex" class="block text-sm font-medium text-gray-700"
						>Sex</label
					>
					<select
						id="sex"
						name="sex"
						class="block w-full py-2 pl-3 pr-10 mt-1 text-base border-gray-300 rounded-md focus:outline-none focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
					>
						<option value="male">Male</option>
						<option value="female">Female</option>
						<option value="transfeminine">Transfeminine</option>
						<option value="transmasculine">Transmasculine</option>
						<option value="other">Other</option>
					</select>
				</div>

				<div>
					<label for="height" class="block text-sm font-medium text-gray-700"
						>Height</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="height"
							id="height"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="5'11&quot;"
						/>
					</div>
				</div>

				<div>
					<label
						for="dateOfBirth"
						class="block text-sm font-medium text-gray-700"
						>Date of birth</label
					>
					<div class="mt-1">
						<input
							type="date"
							name="dateOfBirth"
							id="dateOfBirth"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="Blonde"
						/>
					</div>
				</div>

				<div>
					<label for="eyeColor" class="block text-sm font-medium text-gray-700"
						>Eye color</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="eyeColor"
							id="eyeColor"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="Brown"
						/>
					</div>
				</div>

				<div>
					<label
						for="placeOfBirth"
						class="block text-sm font-medium text-gray-700"
						>Place of birth</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="placeOfBirth"
							id="placeOfBirth"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="United States"
						/>
					</div>
				</div>

				<div>
					<label for="weight" class="block text-sm font-medium text-gray-700"
						>Weight</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="weight"
							id="weight"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="140lbs"
						/>
					</div>
				</div>

				<div>
					<label for="race" class="block text-sm font-medium text-gray-700"
						>Race</label
					>
					<div class="mt-1">
						<input
							type="text"
							name="race"
							id="race"
							class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
							placeholder="White"
						/>
					</div>
				</div>
				<div>
          <label for="image" class="block text-sm font-medium text-gray-700">
            Image
          </label>
          <div class="flex justify-center px-6 pt-5 pb-6 mt-1 border-2 border-gray-300 border-dashed rounded-md">
            <div class="space-y-1 text-center">
              <svg class="w-12 h-12 mx-auto text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <div class="flex text-sm text-gray-600">
                <label for="file" class="relative font-medium text-gray-600 bg-white rounded-md cursor-pointer hover:text-gray-900 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-gray-900">
                  <span class="font-semibold text-blue-600">Upload a file</span>
                  <input id="file" name="file" type="file" class="sr-only">
                </label>
                <p class="pl-1">or drag and drop</p>
              </div>
              <p class="text-xs text-gray-900">
                PNG, JPG 
              </p>
            </div>
          </div>
        </div>
      </div>
      </div>
				<input required type="hidden" name="lat" id="lat" />
				<input required type="hidden" name="lon" id="lon" />
				<div class="p-2 text-blue-700 bg-blue-200 rounded-md">
					<h2>
						<i class="fas fa-info-circle"></i> Click on the map to select the
						last known location
					</h2>
				</div>
				<div
					id="mymap"
					class="rounded-md shadow mymap"
					style="height: 430px"
				></div>

				<div>
					<label
						for="description"
						class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2"
					>
						Description
					</label>
					<div class="mt-1">
						<textarea
							id="description"
							name="description"
							rows="3"
							class="block w-full max-w-lg border border-gray-300 rounded-md shadow-sm focus:ring-gray-900 focus:border-gray-900 sm:text-sm"
						></textarea>
						<p class="mt-2 text-sm text-gray-900">
							Here you can expand on more information. Be as detailed as
							possible.
						</p>
					</div>
				</div>
				<button
					class="w-full px-4 py-2 text-sm font-medium text-white bg-gray-700 border border-transparent rounded-md shadow-sm lock hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"
				>
					Submit
				</button>
			</form>
		</div>
		<h2 class="text-xl">Your Submissions</h2>
		<%_ if(!persons || persons.length === 0) { _%>
		<div class="flex flex-col items-center justify-center p-4 text-gray-900 bg-gray-100 border-2 border-dashed rounded">
			<i class="block text-xl fas fa-user-alt"></i>
			<p>You have not submitted any persons.</p>
			<p>Submit a missing person above.</p>
		</div>
		<% } else { %>
		<ul class="grid grid-cols-2 gap-2">
			<% persons.forEach(person => { %>
			<li class="overflow-hidden bg-white rounded shadow">
				<a href="<%= `/persons/${person._id}` %>">
					<div class="bg-gray-100">
						<img
							src="<%= person.picture %>"
							class="object-cover w-full h-40"
							alt="<%= `${person.name}` %>"
							loading="lazy"
						/>
					</div>
				</a>
				<div class="p-3">
					<p>
						<a href="<%= `/persons/${person._id}` %>"
							><%= `${person.name}` %></a
						>
					</p>
				</div>

				<div class="flex overflow-hidden text-sm text-gray-600 border-t divide-x vorder justify-evenly">
					<a
						class="w-1/2 py-2 text-center submissionbutton"
						href="<%= `/persons/updatePerson/${person._id}` %>"
						>Update</a
					>
					<button class="w-1/2 py-2 text-center del submissionbutton" data-id="<%= person.id %>">
						Delete
					</button>
				</div>
			</li>
			<% }) %>
		</ul>
		<%_ } _%>
	</section>
</section>
<script src="/js/leaflet.js"></script>
<script src="/js/profilemap.js"></script>
<%- include('partials/footer') -%>
